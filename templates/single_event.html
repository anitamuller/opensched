{%- extends 'index.html' -%}
{%- block head -%}
{%- include 'head.html' -%}
{%- block additional_css -%}
<link href="{{ url_for('static', filename='font-awesome-4.1.0/css/font-awesome.min.css') }}" rel="stylesheet" media="screen">
{%- endblock -%}
{%- endblock -%}
{%- block body -%}
{%- if event -%}
<div class="event clearfix">
   <div class="row">
      <div class="col-lg-8">
         <div class="page-header">
            <h1>{{ event['name'] }}</h1>
         </div>
         <div>
             <div class="add-space row"></div>
                <blockquote class=".col-md-4" style="margin-top=30px;">
                    <dl class="dl-horizontal">
                    <dt>Summary</dt>
                    <dd>{{ event['summary'] }}</dd>
                    <dt>Description</dt>
                    <dd>{{ event['description'] }}</dd>
                    <dt>Tags</dt>
                    <dd class="tags">
						{%- if event['tags'] -%}
							{%- for tag in event['tags'] -%}
							<a href="{{ url_for('events_by_tag', event_permalink=event_permalink, tag=tag) }}">{{ tag }}</a>&nbsp;
							{%- endfor -%}
						{%- endif -%}
					</dd>
                    </dl>
                </blockquote>
            {%- if session.user -%}
            <div ng-app="" ng-controller="eventController">
                <a href="{{ url_for('my_schedule', event_permalink=event['permalink']) }}" class="btn btn-primary">My Schedule</a>
                <button ng-click="clickSpeakers()" class="btn btn-primary">Speakers</button>
                <button ng-click="clickAttendees()" class="btn btn-primary">Attendees</button>
                <div class="speakers-list" ng-show="showSpeakers">
                    {%- if not speakers -%}
                        <h4>There are no speakers registered for this event yet.</h4>
                    {%- endif -%}
                    <ul class="list_none">
                    {%- for speaker in speakers -%}
                        <li>
                            <div>
                                <img src="{{ speaker['gravatar_url'] }}" class="img-circle">
                                <td><strong>{{ speaker['name'] }}</strong></td>
                                <a title="Speaker" href="{{ url_for('view_user', id=speaker['_id']) }}" data-target="_blank"> {{ speaker['_id'] }}</a>
                            </div>
                        </li>
                    {%- endfor -%}
                    </ul>
                </div>
                <div class="attendees-list" ng-show="showAttendees">
                    {%- if not attendees -%}
                        <h4>There are no attendees for this event yet.</h4>
                    {%- endif -%}
                    <ul class="list_none">
                    {%- for attendee in attendees -%}
                        <li>
                            <div>
                                <img src="{{ attendee['gravatar_url'] }}" class="img-circle">
                                <td><strong>{{ attendee['name'] }}</strong></td>
                                <a title="Attendee" href="{{ url_for('view_user', id=attendee['_id']) }}" data-target="_blank"> {{ attendee['_id'] }}</a>
                            </div>
                        </li>
                    {%- endfor -%}
                    </ul>
                </div>
            </div>
            {%- else -%}
            <a href="{{ url_for('login') }}">Login</a> or <a href="{{ url_for('register') }}">sign up</a>
            {%- endif -%}
         </div>
         <div>
            <ul class="user-talks">
               {%- for talk in talks -%}
               <form name="talks_by_event" ng-controller="Talks_by_Event">
                    <h3><input type="checkbox" ng-model="checkbox-{{ talk['permalink'] }}" ng-true-value="'YES'" ng-false-value="'NO'" ng-change="new_schedule_talk(event_permalink,talk['permalink'])">
                    <a href="{{ url_for('single_talk', event_permalink=event['permalink'], talk_permalink=talk['permalink']) }}" data-target="_blank">{{ talk['name'] }}</a></h3>
               </form>
               {%- endfor -%}
            </ul>
         </div>
      </div>
   </div>
</div>
<script src="{{ url_for('static', filename='js/angular/angular.min.js') }}"></script>
<script>
    function eventController($scope) {
        $scope.showSpeakers = false;
        $scope.showAttendees = false;
        $scope.clickSpeakers = function() {
            $scope.showAttendees = false;
            $scope.showSpeakers = !$scope.showSpeakers;
        };
        $scope.clickAttendees = function() {
            $scope.showSpeakers = false;
            $scope.showAttendees = !$scope.showAttendees;

        };
    }
</script>
{%- endif -%}
{%- include 'sidebar_event.html' -%}
{%- endblock -%}
{%- block additional_js -%}
<script src="{{ url_for('static', filename='js/lightbox-2.6.min.js') }}"></script>
{%- endblock -%}